name: Generic Upload

on: [push]
   #release:
   #  types: [published]
permissions:
  id-token: write
  contents: read 
jobs:
  versioning:
    uses: Pacificdubey/resuable-workflow/.github/workflows/semantic_versioning.yml@main
    with:
      version_file_path: './version.txt'
      patch: true  # Or change this based on release type or other logic
  create-repo:
     uses: Pacificdubey/resuable-workflow/.github/workflows/generic-repo.yaml@main

  upload-artifact:
    runs-on: ubuntu-latest
    needs: [create-repo, versioning]
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: Set Timestamp and Version
      id: set-vars
      run: |
        echo "Version: ${{ needs.versioning.outputs.new_version }}"
        
